"""
Модуль для збереження ASCII-фігур у файл.

Функція `save_art_to_file` дозволяє зберегти згенеровану фігуру у вигляді ASCII-арту у текстовий файл. 
Це корисно для подальшого перегляду, друку або використання в інших програмах.

Functions:
    save_art_to_file(art, file_name="ascii_art.txt"): Зберігає ASCII-фігуру у файл.
"""

import os

def save_art_to_file(art, file_name="ascii_art.txt"):
    """
    Зберігає згенеровану ASCII-фігуру у файл у директорії ../../results/lab4.

    Parameters:
        art (list[list[int]]): Список списків, що представляє фігуру у вигляді матриці, де:
            - `1` означає символ заповнення (за замовчуванням '@').
            - `0` означає порожній простір (пробіл).
        file_name (str): Ім'я файлу, у який буде збережено фігуру. 
                         За замовчуванням — "ascii_art.txt".

    Workflow:
        1. Визначення шляху до директорії для збереження файлу (`../../results/lab4`).
        2. Створення директорії, якщо вона не існує.
        3. Формування ASCII-арту зі списку списків:
            - `1` конвертується у символ `@`.
            - `0` конвертується у пробіл.
        4. Запис рядків у файл.
        5. Виведення повідомлення про успішне збереження.

    Raises:
        Exception: Виводить повідомлення про будь-яку помилку, що виникла під час збереження.

    Example:
        >>> art = [
        ...     [0, 1, 0],
        ...     [1, 1, 1],
        ...     [0, 1, 0]
        ... ]
        >>> save_art_to_file(art, "diamond.txt")
        Фігуру збережено у файл: ../../results/lab4/diamond.txt

    File Format:
        - ASCII-фігура записується у файл, де кожен рядок відповідає одному рядку матриці.
        - Символи `@` та пробіли використовуються для формування візуального зображення.

    Notes:
        - Шлях до файлу будується відносно розташування цього модуля.
        - Якщо файл вже існує, він буде перезаписаний.
    """
    try:
        # Визначаємо шлях до директорії
        directory = os.path.join(os.path.dirname(os.path.abspath(__file__)), "..", "..", "results", "lab4")
        
        # Якщо директорія не існує, створюємо її
        if not os.path.exists(directory):
            os.makedirs(directory)
        
        # Повний шлях до файлу
        file_path = os.path.join(directory, file_name)
        
        # Записуємо ASCII-арт у файл
        with open(file_path, 'w') as file:
            for row in art:
                line = "".join(['@' if val == 1 else ' ' for val in row])  # Створення рядка з матриці
                file.write(line + '\n')  # Запис рядка у файл
        
        print(f"Фігуру збережено у файл: {file_path}")
    except Exception as e:
        print(f"Помилка під час збереження у файл: {e}")
